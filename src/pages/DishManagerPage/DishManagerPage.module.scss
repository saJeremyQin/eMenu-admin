// src/pages/DishManagerPage/DishManagerPage.module.scss
@use '../../assets/styles/variables' as var;
@use '../../assets/styles/mixins' as mix;
@use 'sass:color';

.container {
  max-width: 900px; // 适应表格的更大宽度
  margin: var.$spacing-xl auto;
  padding: var.$spacing-lg;
  border: 1px solid var.$border-color;
  border-radius: var.$spacing-sm;
  @include mix.box-shadow;
  background-color: white;
  box-sizing: border-box; // 确保 padding 不会影响宽度
}

.heading {
  font-size: 2.2em;
  color: var.$text-color;
  margin-bottom: var.$spacing-lg;
  border-bottom: 2px solid var.$border-color;
  padding-bottom: var.$spacing-md;
  text-align: center;
}

.subHeading {
  font-size: 1.5em;
  color: var.$light-text-color;
  margin-bottom: var.$spacing-md;
  text-align: center;
}

.loading, .error, .message, .infoText {
  text-align: center;
  font-size: var.$font-base;
  margin-bottom: var.$spacing-md;
}

.loading { color: var.$primary-color; }
.error { color: #dc3545; } // Red for errors
.message { color: #28a745; } // Green for success messages
.infoText { color: var.$light-text-color; font-style: italic; }

.formSection, .tableSection {
  margin-bottom: var.$spacing-xl;
}

.formGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); // 响应式网格布局
  gap: var.$spacing-md;
  margin-bottom: var.$spacing-md;
}

.inputField, .selectField {
  width: 100%;
  padding: 10px;
  border: 1px solid var.$border-color;
  border-radius: 5px;
  font-size: var.$font-base;
  box-sizing: border-box;
}

.formActions {
  display: flex;
  justify-content: center;
  gap: var.$spacing-md;
  margin-top: var.$spacing-md;
}

.actionButton {
  background-color: var.$primary-color;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: var.$font-base;
  transition: background-color 0.3s ease;
  &:hover {
    background-color: var.$accent-color;
  }
}

.cancelButton {
  background-color: #6c757d; // Gray
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: var.$font-base;
  transition: background-color 0.3s ease;
  &:hover {
    background-color: #5a6268;
  }
}

.divider {
  border-color: var.$border-color;
  margin: var.$spacing-xl 0;
}

.refreshButton {
  background-color: #17a2b8; // Info blue
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: var.$font-base;
  margin-bottom: var.$spacing-md;
  transition: background-color 0.3s ease;
  &:hover {
    background-color: #138496;
  }
}

.tableWrapper {
  overflow-x: auto; // 当表格内容过多时允许水平滚动
}

.dishTable {
  width: 100%;
  border-collapse: collapse; // 合并边框
  margin-top: var.$spacing-md;

  th, td {
    border: 1px solid var.$border-color;
    padding: var.$spacing-sm var.$spacing-md;
    text-align: left;
    vertical-align: middle; // 垂直居中
  }

  th {
    background-color: var.$background-color-light;
    font-weight: bold;
    color: var.$text-color;
  }

  tr:nth-child(even) {
    background-color: var.$background-color-light; // 交替行背景色
  }

  .dishImage {
    width: 60px;  // 图片固定宽度
    height: 60px; // 图片固定高度
    object-fit: cover; // 裁剪图片以填充，保持比例
    border-radius: 4px;
    display: block; // 确保图片独占一行以避免底部空白
    margin: 0 auto; // 图片居中
  }

  .noImage {
    display: block;
    text-align: center;
    color: var.$light-text-color;
    font-size: 0.8em;
  }

  .editButton {
    background-color: #ffc107; // Warning yellow
    color: var.$text-color;
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85em;
    margin-right: 5px;
    transition: background-color 0.3s ease;
    &:hover {
      background-color: #e0a800;
    }
  }

  .deleteButton {
    background-color: #dc3545; // Danger red
    color: white;
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85em;
    transition: background-color 0.3s ease;
    &:hover {
      background-color: #c82333;
    }
  }
}

// 媒体查询：小屏幕下的表格样式调整
@media (max-width: 768px) {
  .dishTable {
    display: block; // 使表格在小屏幕下变为块级元素
    overflow-x: auto; // 允许水平滚动
    white-space: nowrap; // 防止表格内容换行
  }

  .dishTable thead, .dishTable tbody, .dishTable th, .dishTable td, .dishTable tr {
    display: block; // 让所有表格元素变为块级
  }

  .dishTable th {
    text-align: center; // 标题居中
  }

  .dishTable td {
    text-align: center; // 内容居中
    border-bottom: 1px solid var.$border-color; // 增加底部边框
  }

  .dishTable tr {
    margin-bottom: var.$spacing-sm;
    border: 1px solid var.$border-color;
    border-radius: 8px;
  }

  .dishTable td:before {
    content: attr(data-label); // 在内容前显示列名
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
    color: var.$text-color;
  }
}
